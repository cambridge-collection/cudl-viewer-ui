(()=>{"use strict";var e={4779:()=>{(()=>{function e(e,t,i={encode:!0}){return e.replace(/\{(id|url|watchable|label)\}/g,(e,r)=>{let s=t[r]??"";return!i.encode||"id"!==r&&"url"!==r&&"watchable"!==r?s:encodeURIComponent(s)})}function t(e){return e&&"object"==typeof e&&!Object.isFrozen(e)&&(Object.getOwnPropertyNames(e).forEach(i=>{let r=e[i];r&&"object"==typeof r&&t(r)}),Object.freeze(e)),e}var i=new class{constructor(){this.definitions={}}register(e,i){this.has(e)&&console.warn(`media-embed: re-registering service "${e}", existing definition will be overwritten.`);let r={...i};i.defaultEmbedParams&&(r.defaultEmbedParams={...i.defaultEmbedParams}),Array.isArray(i.idAttr)&&(r.idAttr=[...i.idAttr]),t(r),this.definitions[e]=r}get(e){return this.definitions[e]}has(e){return e in this.definitions}},r={cookieName:"mediaEmbedConsent",cookieValue:"granted",set(e,t){this.cookieName=e,this.cookieValue=t}};function s(){return e=r.cookieName,(document.cookie.split(";").map(e=>e.trim()).find(t=>t.startsWith(`${e}=`))?.substring(e.length+1)||null)===r.cookieValue;var e}window.configureMediaEmbedConsentCookie=function(e,t){r.set(e,t)},window.mediaEmbedServiceRegistry={register:(e,t)=>i.register(e,t),has:e=>i.has(e),get:e=>i.get(e)},i.register("youtube",{idAttr:"itemid",thumbnailTemplate:"https://i.ytimg.com/vi/{id}/hqdefault.jpg",highResPosterTemplate:"https://img.youtube.com/vi/{id}/maxresdefault.jpg",embedBaseTemplate:"https://www.youtube-nocookie.com/embed/{id}",watchUrlTemplate:"https://youtu.be/{id}",thumbnailOEmbedEndpointTemplate:"https://www.youtube.com/oembed?format=json&url={url}",playButtonHTML:'\n    <button type="button" aria-label="{label}" style="position:absolute; inset:0; margin:auto; width:60px; height:60px; border:none; background:none; cursor:pointer;">\n      <svg height="100%" version="1.1" viewBox="0 0 68 48" width="100%"><path class="ytp-large-play-button-bg" d="M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z" fill="#f03"></path><path d="M 45,24 27,14 27,34" fill="#fff"></path></svg>\n    </button>\n  ',transparencyNoticeHTML:'Opens YouTube in a new tab. YouTube may set its own cookies (e.g., for preferences and analytics); see YouTube’s \n    <a href="https://policies.google.com/privacy" target="_blank" rel="noopener noreferrer">Privacy Policy</a> and \n    <a href="https://policies.google.com/technologies/cookies" target="_blank" rel="noopener noreferrer">Cookie Policy</a>.'}),i.register("soundcloud",{idAttr:["trackurl","trackid"],embedBaseTemplate:"https://w.soundcloud.com/player/",watchFallbackSearchTemplate:"https://soundcloud.com/search/sounds?q={id}",thumbnailOEmbedEndpointTemplate:"https://soundcloud.com/oembed?format=json&url={url}",thumbnailTemplate:"https://via.placeholder.com/560x315?text=SoundCloud+{id}",playButtonHTML:'<div class="default-playbtn" aria-hidden="true">▶</div>',autoplayParam:"auto_play",defaultEmbedParams:{color:"#ff5500",auto_play:"false",hide_related:"false",show_comments:"true",show_user:"true",show_reposts:"false",show_teaser:"true"},transparencyNoticeHTML:'Opens SoundCloud in a new tab. SoundCloud may set its own cookies (e.g., for preferences and analytics); see SoundCloud’s \n    <a href="https://soundcloud.com/pages/privacy" target="_blank" rel="noopener noreferrer">Privacy Policy</a> and \n    <a href="https://pages.soundcloud.com/legal/cookie-policy" target="_blank" rel="noopener noreferrer">Cookie Policy</a>.'}),i.register("vimeo",{idAttr:"itemid",thumbnailOEmbedEndpointTemplate:"https://vimeo.com/api/oembed.json?url={url}",embedBaseTemplate:"https://player.vimeo.com/video/{id}",watchUrlTemplate:"https://vimeo.com/{id}",playButtonHTML:'\n    <button type="button" aria-label="{label}" style="position:absolute; inset:0; margin:auto; width:60px; height:60px; border:none; background:none; cursor:pointer;">\n      <svg aria-hidden="true" width="60" height="60" viewBox="0 0 64 64" style="display:block;">\n        <circle cx="32" cy="32" r="30" fill="rgba(0,0,0,0.5)"/>\n        <polygon points="26,20 46,32 26,44" fill="white"/>\n      </svg>\n    </button>\n  ',transparencyNoticeHTML:'Opens Vimeo in a new tab. Vimeo may set its own cookies (e.g., for preferences and analytics); see Vimeo’s \n    <a href="https://vimeo.com/privacy" target="_blank" rel="noopener noreferrer">Privacy Policy</a> and \n    <a href="https://vimeo.com/cookie_policy" target="_blank" rel="noopener noreferrer">Cookie Policy</a>.'});var a=class extends HTMLElement{constructor(){super(),this.embedId=null,this.shadow=this.attachShadow({mode:"open"})}static get observedAttributes(){return["service","playlabel","title","autoplay","params","playlistindex","playlistid","itemid"]}get playLabel(){return this.getAttribute("playlabel")||"Play"}get titleText(){return this.getAttribute("title")||""}get autoplay(){if(!this.hasAttribute("autoplay"))return!1;let e=this.getAttribute("autoplay");return null===e||/^(true|1)?$/i.test(e)}get playlistIndex(){let e=this.getAttribute("playlistindex");if(!e)return;let t=parseInt(e,10);return!Number.isFinite(t)||t<=0?void 0:t}get extraParams(){return new URLSearchParams(this.getAttribute("params")??"")}connectedCallback(){this.initialize()}attributeChangedCallback(e,t,i){this.initialize()}disconnectedCallback(){this.currentPlayButton&&this.currentPlayButtonHandler&&this.currentPlayButton.removeEventListener("click",this.currentPlayButtonHandler)}ensureStyles(){if(this.shadow.querySelector("style[data-media-embed]"))return;let e=document.createElement("style");e.setAttribute("data-media-embed",""),e.textContent="\n      .preview-wrapper {\n        display: flex;\n        flex-direction: column;\n        height: 100%;\n        width: 100%;\n        box-sizing: border-box;\n      }\n      .media-container {\n        position: relative;\n        flex: 1 1 auto;\n        display: block;\n        background-size: cover;\n        background-position: center;\n        overflow: hidden;\n      }\n      .transparency-notice {\n        flex: 0 0 auto;\n        font-size: 10px;\n      }\n      .overlay-title {\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        padding: 4px 8px;\n        background: rgba(0, 0, 0, 0.6);\n        color: white;\n        font-size: 0.9rem;\n        line-height: 1.1;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        box-sizing: border-box;\n        pointer-events: none;\n        text-align: center\n      }\n    ",this.shadow.prepend(e)}showError(e){let t=document.createElement("div");t.setAttribute("role","alert"),t.setAttribute("aria-live","polite"),t.textContent=e,t.style.fontSize="12px",t.style.color="#900",t.style.background="#fee",t.style.padding="6px",t.style.border="1px solid #c00",t.style.borderRadius="4px",this.shadow.appendChild(t)}initialize(){if(this.shadow.innerHTML="",this.currentPlayButton&&this.currentPlayButtonHandler&&(this.currentPlayButton.removeEventListener("click",this.currentPlayButtonHandler),this.currentPlayButton=void 0,this.currentPlayButtonHandler=void 0),this.mediaContainer=void 0,this.previewImageId=void 0,this.serviceName=this.getAttribute("service")||void 0,!this.serviceName)return console.error("media-embed: missing service attribute"),void this.showError("Media embed misconfigured: missing service attribute.");if(this.service=i.get(this.serviceName),!this.service)return console.error(`media-embed: unknown service "${this.serviceName}"`),void this.showError(`Media embed misconfigured: unknown service "${this.serviceName}".`);let e=Array.isArray(this.service.idAttr)?[...this.service.idAttr]:[this.service.idAttr];"youtube"===this.serviceName&&(e=["playlistid",...e]),this.embedId=null;for(let t of e){let e=this.getAttribute(t);if(e){this.embedId=e.trim(),this.usedIdAttr=t;break}}if(!this.embedId)return console.error(`media-embed: missing id attribute (${e.join("/")}) for service ${this.serviceName}`),void this.showError(`Media embed misconfigured: missing id attribute for service ${this.serviceName}.`);this.renderPreview(),s()&&this.upgradeToIframe()}renderPreview(){if(!this.embedId)return;this.ensureStyles();let t=document.createElement("div");t.className="preview-wrapper";let i=document.createElement("div");if(i.className="media-container",this.mediaContainer=i,"soundcloud"===this.serviceName&&"trackid"===this.usedIdAttr){let e=`https://w1.sndcdn.com/${encodeURIComponent(this.embedId)}_m.png`;i.style.backgroundImage=`url("${e}")`,this.previewImageId=this.embedId}else if("youtube"===this.serviceName&&"playlistid"===this.usedIdAttr){let t=this.getAttribute("itemid");if(t){let r=e("https://i.ytimg.com/vi/{id}/hqdefault.jpg",{id:t});i.style.backgroundImage=`url("${r}")`,this.previewImageId=t}}else if(this.service?.thumbnailTemplate){let t=e(this.service.thumbnailTemplate,{id:this.embedId});i.style.backgroundImage=`url("${t}")`,this.previewImageId=this.embedId}let r,a=document.createElement("a");if(a.href=this.getWatchUrl(),a.target="_blank",a.rel="noopener",a.setAttribute("aria-label",this.playLabel),a.setAttribute("title",this.titleText||this.playLabel),a.style.display="block",a.style.width="100%",a.style.height="100%",a.dataset.preview="false",i.appendChild(a),this.titleText){let e=document.createElement("div");e.className="overlay-title",e.setAttribute("part","overlay-title"),e.textContent=this.titleText,e.setAttribute("aria-label",this.titleText),e.setAttribute("title",this.titleText),i.appendChild(e)}if(this.service?.playButtonHTML){let e=this.service.playButtonHTML.replaceAll("{label}",this.playLabel.replace(/[&<>"']/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[e]||e))),t=document.createElement("template");t.innerHTML=e.trim();let i=t.content.firstElementChild;if(i){r=i;let e=e=>{e.stopPropagation(),e.preventDefault(),s()?this.upgradeToIframe():window.open(this.getWatchUrl(),"_blank","noopener")};r.addEventListener("click",e),this.currentPlayButton=r,this.currentPlayButtonHandler=e}else r=this.defaultPlayButton()}else r=this.defaultPlayButton();if(i.appendChild(r),t.appendChild(i),this.service?.transparencyNoticeHTML){let e=document.createElement("div");e.setAttribute("role","note"),e.className="transparency-notice",e.setAttribute("part","transparency-notice"),e.innerHTML=this.service.transparencyNoticeHTML,t.appendChild(e)}this.shadow.appendChild(t),this.resolveOEmbedThumbnail(),this.service?.highResPosterTemplate&&("youtube"===this.serviceName&&"playlistid"===this.usedIdAttr&&!this.previewImageId||this.upgradePosterImage())}defaultPlayButton(){let e=document.createElement("div");return e.className="default-playbtn",e.textContent="▶",e.setAttribute("aria-hidden","true"),e}getWatchUrl(){if(!this.service||!this.embedId)return"#";if("youtube"===this.serviceName&&"playlistid"===this.usedIdAttr){let e=this.getAttribute("itemid");if(e){let t=new URL(`https://youtu.be/${encodeURIComponent(e)}`);t.searchParams.set("list",this.embedId);let i=this.playlistIndex;return i&&t.searchParams.set("index",String(i)),t.toString()}{let e=new URL("https://www.youtube.com/playlist");e.searchParams.set("list",this.embedId);let t=this.playlistIndex;return t&&e.searchParams.set("index",String(t)),e.toString()}}if("soundcloud"===this.serviceName){let t=this.getAttribute("permalink");if(t)return`https://soundcloud.com/${t.replace(/^\/+|\/+$/g,"")}`;if(this.isProbablyUrl(this.embedId))return this.embedId;if(this.service.watchFallbackSearchTemplate)return e(this.service.watchFallbackSearchTemplate,{id:this.embedId})}if(this.service.watchUrlTemplate){let t=this.service.watchUrlTemplate;try{return/\{id\}/.test(t)?e(t,{id:this.embedId}):/\{url\}/.test(t)?e(t,{url:this.embedId},{encode:!1}):/\{watchable\}/.test(t)?this.embedId:t}catch(e){return console.error("media-embed: error building watch URL from template",e),"#"}}if(this.service.embedBaseTemplate){let e=this.service.embedBaseTemplate;e=e.replace("{id}",encodeURIComponent(this.embedId)),e=e.replace("{url}",encodeURIComponent(this.embedId));try{return e}catch(e){return console.error("media-embed: invalid embed base template for watch URL",e),"#"}}return"#"}shouldAutoplay(){return this.autoplay}buildEmbedUrl(){if(!this.service||!this.embedId)return"#";if("youtube"===this.serviceName&&"playlistid"===this.usedIdAttr){let e=this.getAttribute("itemid");if(e){let t;try{t=new URL(`https://www.youtube-nocookie.com/embed/${encodeURIComponent(e)}`)}catch{return"#"}t.searchParams.set("list",this.embedId),this.shouldAutoplay()&&t.searchParams.set("autoplay","1"),t.searchParams.set("playsinline","1");for(let[e,i]of this.extraParams.entries())t.searchParams.set(e,i);return t.toString()}{let e;try{e=new URL("https://www.youtube-nocookie.com/embed/videoseries")}catch{return"#"}e.searchParams.set("list",this.embedId);let t=this.playlistIndex;t&&e.searchParams.set("index",String(t)),this.shouldAutoplay()&&e.searchParams.set("autoplay","1"),e.searchParams.set("playsinline","1");for(let[t,i]of this.extraParams.entries())e.searchParams.set(t,i);return e.toString()}}if("soundcloud"===this.serviceName){let e,t=`https://api.soundcloud.com/tracks/${encodeURIComponent(this.embedId)}`;try{e=new URL(this.service.embedBaseTemplate)}catch(e){return console.error("media-embed: invalid SoundCloud embed base template",e),"#"}let i=new URLSearchParams;if(this.service.defaultEmbedParams)for(let[e,t]of Object.entries(this.service.defaultEmbedParams))i.set(e,t);if(i.set("url",t),this.shouldAutoplay()){let e=this.service.autoplayParam||"auto_play";i.set(e,"true")}for(let[e,t]of this.extraParams.entries())i.set(e,t);return e.search=i.toString(),e.toString()}let e,t=this.service.embedBaseTemplate||"";t=t.replace("{id}",encodeURIComponent(this.embedId)),t=t.replace("{url}",encodeURIComponent(this.embedId));try{e=new URL(t)}catch(e){return console.error("media-embed: invalid embed base template",e),"#"}["youtube","vimeo"].includes(this.serviceName||"")&&this.shouldAutoplay()&&e.searchParams.set("autoplay","1"),"youtube"===this.serviceName&&e.searchParams.set("playsinline","1");for(let[t,i]of this.extraParams.entries())e.searchParams.set(t,i);return e.toString()}upgradePosterImage(){if(!this.service?.highResPosterTemplate)return;let t=this.previewImageId||this.embedId;if(!t)return;let i=e(this.service.highResPosterTemplate,{id:t}),r=new Image;r.fetchPriority="low",r.referrerPolicy="origin",r.src=i,r.onload=()=>{this.mediaContainer?this.mediaContainer.style.backgroundImage=`url("${i}")`:this.style.backgroundImage=`url("${i}")`}}isProbablyUrl(e){return/^(https?:)?\/\//i.test(e)}upgradeToIframe(){if(this.shadow.querySelector("iframe")||!this.embedId)return;let e=document.createElement("iframe");e.width="100%",e.height="100%",e.title=this.titleText||this.playLabel,e.allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",e.allowFullscreen=!0,e.loading="lazy",e.src=this.buildEmbedUrl(),this.currentPlayButton&&this.currentPlayButtonHandler&&(this.currentPlayButton.removeEventListener("click",this.currentPlayButtonHandler),this.currentPlayButton=void 0,this.currentPlayButtonHandler=void 0),this.shadow.innerHTML="",this.shadow.appendChild(e)}resolveOEmbedThumbnail(){if(!this.embedId)return;let t=null;if("soundcloud"===this.serviceName){let e=this.getAttribute("permalink");e?t=`https://soundcloud.com/${e.replace(/^\/+|\/+$/g,"")}`:this.isProbablyUrl(this.embedId)&&(t=this.embedId)}else"vimeo"===this.serviceName?t=`https://vimeo.com/${encodeURIComponent(this.embedId)}`:"youtube"===this.serviceName&&"playlistid"===this.usedIdAttr&&!this.previewImageId&&(t=this.getWatchUrl());if(!t||!this.service?.thumbnailOEmbedEndpointTemplate)return;let i=t.replace(/\/+$/,""),r=e(this.service.thumbnailOEmbedEndpointTemplate,{url:i});fetch(r).then(e=>e.ok?e.json():Promise.reject()).then(e=>{if(e?.thumbnail_url){let t=e.thumbnail_url;this.mediaContainer?this.mediaContainer.style.backgroundImage=`url("${t}")`:this.style.backgroundImage=`url("${t}")`}}).catch(()=>{})}};customElements.get("media-embed")||customElements.define("media-embed",a),window.addEventListener("media-embed-consent-granted",()=>{document.querySelectorAll("media-embed").forEach(e=>{"function"==typeof e.upgradeToIframe&&e.upgradeToIframe()})})})()}},t={};function i(r){var s=t[r];if(void 0!==s)return s.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,i),a.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i(4779),console.log("media-embed script running"),window.configureMediaEmbedConsentCookie?.("cookieconsent_status","allow")})();